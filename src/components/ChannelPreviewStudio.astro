---
import IconStudio from "../components/IconStudio";

const {
    countNoContext,
    countJSAC,
}: {
    countNoContext: number | null;
    countJSAC: number | null;
} = await new Promise<{
    countNoContext: number | null;
    countJSAC: number | null;
}>(async (resolve, reject) => {
    try {
        const response = await fetch(
            "https://jackstudio.stats100.xyz/subcount",
        );
        const data = await response.json();
        return resolve({
            countNoContext: data.UCrZKnWgOaYTTc7sc1KsVXZw,
            countJSAC: data.UCUXNOmIdsoyd5fh5TZHHO5Q,
        });
    } catch (e) {
        return reject(e);
    }
}).catch((error) => {
    console.error(error);
    return {
        countNoContext: null,
        countJSAC: null,
    };
});
console.log({ countNoContext, countJSAC });
---

<li class="link-card">
    <img
        src="https://yt3.googleusercontent.com/qu4SxGtuv1e-nfZgPoCeIbRJ-k5uJLeqB2z3H-H18nrnZ9e7nSEMadcKkKlojztdslZwr-Ic=s176-c-k-c0x00ffffff-no-rj"
        alt="JSAC Logo"
    />
    <span>
        <h2>JackSucksAtClips <IconStudio/></h2>
        <p>{countJSAC.toLocaleString()} Subscribers</p>
    </span>
</li>
<li class="link-card">
    <img
        src="https://yt3.googleusercontent.com/mj45R5maavRfU_Zjm2UaCjjZr96TZAPWUCMA8_zzT5YtpCBo1amqvuHSg0qS-ogMHNG1mxzT=s176-c-k-c0x00ffffff-no-rj"
        alt="No Context Logo"
    />
    <span>
        <h2>No Context JackSucksAtLife <IconStudio/></h2>
        <p>{countNoContext.toLocaleString()} Subscribers</p>
    </span>
</li>
<style>
    .link-card {
        list-style: none;
        display: flex;
        align-items: center; /* Vertically center content */
        padding: 1px;
        background-color: #23262d;
        background-image: none;
        background-size: 400%;
        border-radius: 7px;
        background-position: 100%;
        transition: background-position 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
    }
    .link-card img {
        width: 125px; /* Adjust image size as needed */
        height: auto;
        border-radius: 50%;
        margin-left: 5px;
        padding: 5px;
    }
    .link-card > span {
        flex: 1; /* Expand to fill available space */
        text-decoration: none;
        line-height: 1.4;
        padding: calc(1.5rem - 1px);
        border-radius: 8px;
        color: white;
        background-color: #23262d;
        opacity: 0.8;
    }
    h2 {
        margin: 0;
        transition: color 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        font-size: xx-large;
    }
    p {
        margin-bottom: 0;
        font-size: x-large;
    }
    .link-card:is(:hover, :focus-within) {
        background-position: 0;
        background-image: var(--accent-gradient);
    }
    .link-card:is(:hover, :focus-within) h2 {
        color: rgb(var(--accent-light));
    }
</style>
